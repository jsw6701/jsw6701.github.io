---
title: "[Spring] ìŠ¤í”„ë§ ì…ë¬¸ ì›¹ ê°œë°œ ê¸°ì´ˆ(11)"
excerpt: "íšŒì› ê´€ë¦¬ ì˜ˆì œ - ë°±ì—”ë“œ ê°œë°œ(íšŒì› ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„± 2)"

categories:
  - Backend
tags:
  - [backend, spring, ì…ë¬¸, ê°•ì˜, ultimate, Java, gradle, íšŒì›, í…ŒìŠ¤íŠ¸, ë¦¬í¬ì§€í† ë¦¬]

permalink: /backend/spring11

toc: true
toc_sticky: true
 
date: 2022-07-26
last_modified_at: 2022-07-26
---

# íšŒì› ë¦¬í¬ì§€í† ë¦¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„± 2

### findAll í…ŒìŠ¤íŠ¸

ë¹„ìŠ·í•œ í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ì§€ë§Œ ì´ë²ˆì— resultëŠ” Listë¡œ ë°›ëŠ”ë‹¤.

2ê°œë¥¼ ì…ë ¥í–ˆìœ¼ë‹ˆ sizeë¥¼ 2ê°œì¸ì§€ í™•ì¸í•´ë³´ë©´ ëœë‹¤.

```java
@Test
public void findAll(){
    Member member1 = new Member();
    member1.setName("spring1");
    repository.save(member1);

    Member member2 = new Member();
    member2.setName("spring2");
    repository.save(member2);

    List<Member> result = repository.findAll();

    assertThat(result.size()).isEqualTo(2);
}
```

![spring40](https://jsw6701.github.io/assets/images/posts_img/spring/40.png)

ì„±ê³µì´ë‹¤.

### findAll ì´í›„ ì „ì²´ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜

í•˜ì§€ë§Œ!!! ì—¬ê¸°ì„œ ê°‘ìê¸° Test ì „ì²´ë¥¼ ëŒë ¤ë³¸ë‹¤ë©´ ì—ëŸ¬ê°€ ë‚œë‹¤.

![spring41](https://jsw6701.github.io/assets/images/posts_img/spring/41.png)

findByNameì—ì„œ ì—ëŸ¬ê°€ ë‚¬ë‹¤.

ì™œëƒí•˜ë©´ ë³´ë©´ í…ŒìŠ¤íŠ¸ ìˆœì„œê°€ findAllì´ ë¨¼ì € ì‹¤í–‰ì´ ë˜ê³  ê·¸ ë‹¤ìŒì— findByNameì´ ì‹¤í–‰ì´ ë˜ì—ˆë‹¤.

í…ŒìŠ¤íŠ¸ì˜ ìˆœì„œëŠ” ë³´ì¥ì´ ì•ˆëœë‹¤.

ê·¸ë˜ì„œ ëª¨ë“  í…ŒìŠ¤íŠ¸ëŠ” ë©”ì„œë“œ ë³„ë¡œ ë”°ë¡œ ë™ì‘í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

ê²°êµ­ ì›ì¸ì€

<aside>
ğŸ’¡ findAllì—ì„œ spring1ê³¼ spring2ê°€ ì´ë¯¸ ì €ì¥ì´ ë˜ì–´ì„œ findByNameí•  ë•Œ ì´ì „ì— ì €ì¥í–ˆë˜ findAllì˜ spring1ì´ ë‚˜ì™€ë²„ë¦° ê²ƒì´ë‹¤.

</aside>

### í•´ê²° ë°©ë²•

Testë¥¼ í•˜ë‚˜ ëë‚´ê³  ë‚˜ë©´ ë°ì´í„°ë¥¼ í´ë¦¬ì–´ í•´ì£¼ì–´ì•¼í•œë‹¤.

@AfterEach ë€ ë©”ì„œë“œê°€ ì‹¤í–‰ì´ ëë‚  ë•Œë§ˆë‹¤ ì–´ë–¤ ë™ì‘ì„ í•˜ëŠ” ì½œë°± ë©”ì„œë“œì´ë‹¤.

ë¨¼ì € ì›ë˜ëŠ” MemberRepositoryë¡œ í–ˆì—ˆì§€ë§Œ MemoryMemberRepository repositoryë¡œ ë°”ê¿”ì¤€ë‹¤.

ë‹¤ìŒìœ¼ë¡œ aftereach ë©”ì†Œë“œ í‹€ì„ ë§Œë“¤ì–´ì¤€ë‹¤.

![spring42](https://jsw6701.github.io/assets/images/posts_img/spring/42.png)

ë‹¤ìŒìœ¼ë¡œ MemoryMemberRepositoryë¡œ ì´ë™í•œë‹¤.

<aside>
ğŸ’¡ ê¿€íŒ : ë³€ìˆ˜ì— Ctrl + Bë¥¼ í•˜ë©´ ì‚¬ìš©ìœ„ì¹˜ë¡œ ì´ë™í•œë‹¤.

</aside>

ì´ë™í•œ í›„ clearí•´ì£¼ëŠ” ë©”ì†Œë“œë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

MemoryMemberRepository.java

```java
public void clearStore(){
    store.clear();
}
```

ë‹¤ìŒìœ¼ë¡œ ë‹¤ì‹œ MemoryMemberRepositoryTestë¡œ ì´ë™í•´ì„œ aftereach ë©”ì†Œë“œë¥¼ ì±„ì›Œì¤€ë‹¤.

MemoryMemberRepositoryTest.java

```java
@AfterEach
public void aftereach(){
    repository.clearStore();
}
```

í—·ê°ˆë¦´ ìˆ˜ ìˆìœ¼ë‹ˆ ì „ì²´ ì½”ë“œë¥¼ ì²¨ë¶€í•˜ê² ë‹¤.

MemoryMemberRepository.java

```java
import mess.hellospring.repository.MemberRepository;

import java.util.*;

public class MemoryMemberRepository implements MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();
    private static long sequence = 0L;

    @Override
    public Member save(Member member) {
        member.setId(++sequence);
        store.put(member.getId(), member);
        return member;
    }

    @Override
    public Optional<Member> findById(Long id) {
        return Optional.ofNullable(store.get(id));
    }

    @Override
    public Optional<Member> findByName(String name) {
        return store.values().stream()
                .filter(member -> member.getName().equals(name))
                .findAny();
    }

    @Override
    public List<Member> findAll() {
        return new ArrayList<>(store.values());
    }

    public void clearStore(){
        store.clear();
    }
}
```

MemoryMemberRepositoryTest.java

```java
import mess.hellospring.repository.MemberRepository;

import java.util.*;

public class MemoryMemberRepository implements MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();
    private static long sequence = 0L;

    @Override
    public Member save(Member member) {
        member.setId(++sequence);
        store.put(member.getId(), member);
        return member;
    }

    @Override
    public Optional<Member> findById(Long id) {
        return Optional.ofNullable(store.get(id));
    }

    @Override
    public Optional<Member> findByName(String name) {
        return store.values().stream()
                .filter(member -> member.getName().equals(name))
                .findAny();
    }

    @Override
    public List<Member> findAll() {
        return new ArrayList<>(store.values());
    }

    public void clearStore(){
        store.clear();
    }
}
```

### í”„ë¡œì íŠ¸ í•œëˆˆì— ë³´ê¸°

![spring43](https://jsw6701.github.io/assets/images/posts_img/spring/43.png)